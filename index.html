<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Secure Access</title>
    <style>
        body { font-family: Arial; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        #urlInput { width: 70%; padding: 10px; margin-right: 10px; border: 1px solid #ddd; border-radius: 5px; }
        #fetchBtn { padding: 10px 20px; background: #007cba; color: white; border: none; border-radius: 5px; cursor: pointer; }
        #result { margin-top: 20px; border: 1px solid #ddd; padding: 15px; border-radius: 5px; min-height: 200px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîí Secure Web Access</h1>
        
        <div class="status hidden" id="status"></div>
        
        <div>
            <input type="url" id="urlInput" placeholder="https://example.com" value="https://httpbin.org/ip">
            <button id="fetchBtn">Get Data</button>
        </div>
        
        <div id="result">
            <p>Enter URL and click "Get Data"</p>
        </div>
    </div>

    <script>
        class SimpleStealthClient {
            constructor() {
                this.proxies = [
                    'https://bsxlab-s2025.github.io/stealth-proxy/proxy.html',
                    'https://raw.githubusercontent.com/BSXLAbS2025/stealth-proxy/main/proxy.html',
                    'https://cdn.jsdelivr.net/gh/BSXLAbS2025/stealth-proxy/proxy.html'
                ];
            }

            showStatus(message, type) {
                const statusEl = document.getElementById('status');
                statusEl.textContent = message;
                statusEl.className = `status ${type}`;
                statusEl.classList.remove('hidden');
                setTimeout(() => statusEl.classList.add('hidden'), 4000);
            }

            async fetchUrl(targetUrl) {
                // –ü—Ä–æ–±—É–µ–º –ø—Ä—è–º—ã–µ CORS –ø—Ä–æ–∫—Å–∏ —Å–Ω–∞—á–∞–ª–∞
                const corsProxies = [
                    'https://corsproxy.io/?',
                    'https://api.codetabs.com/v1/proxy?quest=',
                    'https://cors-anywhere.herokuapp.com/'
                ];

                for (let proxy of corsProxies) {
                    try {
                        this.showStatus(`Trying ${proxy}...`, 'success');
                        const response = await fetch(proxy + targetUrl, {
                            headers: {
                                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                            }
                        });
                        
                        if (response.ok) {
                            const data = await response.text();
                            this.showStatus('Success!', 'success');
                            return data;
                        }
                    } catch (error) {
                        console.log(`Proxy ${proxy} failed:`, error);
                    }
                }

                // –ï—Å–ª–∏ CORS –ø—Ä–æ–∫—Å–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –ø—Ä–æ–±—É–µ–º GitHub Pages –ø—Ä–æ–∫—Å–∏
                for (let proxy of this.proxies) {
                    try {
                        this.showStatus(`Trying GitHub proxy...`, 'success');
                        const encodedUrl = btoa(targetUrl);
                        const proxyUrl = `${proxy}?url=${encodedUrl}&t=${Date.now()}`;
                        
                        const response = await fetch(proxyUrl);
                        if (response.ok) {
                            const data = await response.text();
                            this.showStatus('Success via GitHub!', 'success');
                            return data;
                        }
                    } catch (error) {
                        console.log(`GitHub proxy failed:`, error);
                    }
                }

                throw new Error('All proxies failed');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            const client = new SimpleStealthClient();
            
            document.getElementById('fetchBtn').addEventListener('click', async function() {
                const url = document.getElementById('urlInput').value.trim();
                const resultDiv = document.getElementById('result');
                
                if (!url) {
                    client.showStatus('Please enter URL', 'error');
                    return;
                }

                try {
                    client.showStatus('Loading...', 'success');
                    resultDiv.innerHTML = '<p>Loading...</p>';
                    
                    const result = await client.fetchUrl(url);
                    
                    // –ü—ã—Ç–∞–µ–º—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                    try {
                        const json = JSON.parse(result);
                        resultDiv.innerHTML = `<pre>${JSON.stringify(json, null, 2)}</pre>`;
                    } catch {
                        // –ï—Å–ª–∏ –Ω–µ JSON, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–∫ —Ç–µ–∫—Å—Ç
                        if (result.length > 1000) {
                            resultDiv.innerHTML = `<textarea style="width:100%; height:300px">${result}</textarea>`;
                        } else {
                            resultDiv.innerHTML = `<pre>${result}</pre>`;
                        }
                    }
                    
                } catch (error) {
                    resultDiv.innerHTML = `
                        <p style="color: red;">Error: ${error.message}</p>
                        <p>Try these test URLs:</p>
                        <ul>
                            <li>https://httpbin.org/ip</li>
                            <li>https://api.github.com</li>
                            <li>https://jsonplaceholder.typicode.com/posts/1</li>
                        </ul>
                    `;
                    client.showStatus('Failed to fetch', 'error');
                }
            });

            // Enter key support
            document.getElementById('urlInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') document.getElementById('fetchBtn').click();
            });
        });
    </script>
</body>
</html>
